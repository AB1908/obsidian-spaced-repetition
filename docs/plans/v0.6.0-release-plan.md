# v0.6.0 Release Plan

**Created:** 2026-02-17
**Current version:** 0.5.2
**Target:** 0.6.0 (next minor)

## Context

Plugin is at v0.5.2. Significant work has landed since: BUG-001 fix (navigation filters), DEBT-015 (security remediation), STORY-014 (release automation baseline), fixture sanitization, workflow enforcement. Goal: ship a polished 0.6.0 that fixes remaining user-facing bugs, consolidates state management, and cleans up UX.

## What's Already on Main

- BUG-001 (navigation ignores filters) — fixed
- BUG-006 (source chooser folder name) — fixed, but introduced BUG-008 regression
- DEBT-015 (security remediation) — merged (2 moderate alerts deferred to 2026-03-15)
- STORY-014 (release automation baseline) — merged
- DEBT-016/017 (doc cleanup) — done

## Release Scope

### Tier 1 — Must Ship (Bugs)

| Item | Plan | Status | Agent |
|------|------|--------|-------|
| [BUG-008](BUG-008-moonreader-name-regression.md) | MoonReader shows "Annotations" instead of title | Accepted | Codex 5.3 |
| [BUG-007](BUG-007-heading-level-strategy.md) | Section list flattens heading levels | Approved | Codex 5.3 |
| [BUG-005](BUG-005-stale-source-path.md) | Source path stale after file move | Needs test audit | Claude Code |
| [BUG-002](BUG-002-modal-title-investigation.md) | Modal title doesn't update | To Be Verified | Manual first |

### Tier 1 — Must Ship (UX)

| Item | Plan | Status | Agent |
|------|------|--------|-------|
| [STORY-016](STORY-016-remove-filter-buttons.md) | Remove filter buttons from card creation | Ready | Codex 5.3 |

### Tier 2 — Must Ship (Persistence Refactor)

| Item | Plan | Status | Agent |
|------|------|--------|-------|
| [DEBT-007](DEBT-007-persistence-refactor.md) | FlashcardNote persistence consolidation | Ready | Claude Code |

### Tier 3 — Ship if Ready

| Item | Agent | Notes |
|------|-------|-------|
| DEBT-027 (formalize scattered ADRs) | Gemini CLI | 8 ADRs from session logs |
| DEBT-015 remainder (esbuild/nanoid majors) | Codex 5.3 | Semver-major upgrades, deferred to 2026-03-15 |
| Merge polish branch | Manual | After all fixes land |

### Explicitly Out of Scope

- STORY-012 (drift detection UX) — Backlog, needs design decisions
- DEBT-006 (disk boundary extraction) — catalogue only
- DEBT-013 (source polymorphism) — architectural, deferred
- DEBT-001 (discriminated unions) — backlog
- All SPIKEs (process/tooling research)

## Agent Delegation Strategy

| Agent | Items | Rationale |
|-------|-------|-----------|
| **Codex 5.3** | BUG-008, BUG-007, STORY-016 | Well-scoped, plans have exact code diffs + test matrices |
| **Gemini CLI** | DEBT-027 | Large-context structured extraction from session logs |
| **Claude Code** | BUG-005, DEBT-007 | Complex reasoning: event handling, architecture-sensitive refactor |
| **Manual** | BUG-002 | Verify in Obsidian, then close or plan fix |

## Execution Order

### Phase A — Parallel (3 agents)
- **Codex 5.3**: BUG-008 → BUG-007 → STORY-016 (sequential within agent)
- **Gemini CLI**: DEBT-027
- **Claude Code**: BUG-005 (snapshot-first, then 2-phase fix)

### Phase B — Sequential (after Phase A)
- **Manual**: BUG-002 verification in Obsidian test vault
- **Claude Code**: DEBT-007 persistence refactor (touches same model files as bugs, do after they're stable)

### Phase C — Release
1. Merge all fix branches to main
2. Merge polish branch to main
3. `npm test` + `npm run build` gate
4. `npm run release:prepare -- 0.6.0`
5. PR to main with `release:minor` label
6. Automation creates tag + release

## Release Gate Criteria

- [ ] All Tier 1 + Tier 2 items merged to main
- [ ] `npm test` — all suites pass
- [ ] `npm run build` — clean
- [ ] Manual smoke test in Obsidian vault:
  - MoonReader book shows title, not "Annotations" (BUG-008)
  - Clippings show basename (BUG-006 regression check)
  - Section list shows clean heading hierarchy (BUG-007)
  - No filter buttons in flashcard creation annotation list (STORY-016)
  - Moving a source file doesn't crash (BUG-005)
  - Modal title updates during navigation (BUG-002)
  - Card review writes persist correctly (DEBT-007)
- [ ] `npm run release:prepare -- 0.6.0` dry run
