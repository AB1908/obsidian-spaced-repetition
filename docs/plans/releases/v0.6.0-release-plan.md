# v0.6.0 Release Plan

**Created:** 2026-02-17
**Current version:** 0.2.0
**Target:** 0.6.0 (next minor)

## Context

Plugin is at v0.5.2. Significant work has landed since: BUG-001 fix (navigation filters), DEBT-015 (security remediation), STORY-014 (release automation baseline), fixture sanitization, workflow enforcement. Goal: ship a polished 0.6.0 that fixes remaining user-facing bugs, consolidates state management, and cleans up UX.

## What's Already on Main

- BUG-001 (navigation ignores filters) — fixed
- BUG-006 (source chooser folder name) — fixed, but introduced BUG-008 regression
- BUG-007 (section list heading levels) — **Done**
- STORY-019 (remove filter buttons from card creation) — **Done**
- DEBT-015 (security remediation) — merged (2 moderate alerts deferred to 2026-03-15)
- STORY-014 (release automation baseline) — merged
- DEBT-016/017 (doc cleanup) — done
- DEBT-024 (filter policy single source of truth) — **Done** (unified via refactor)
- DEBT-030 (markdown source migration) — **Done**

## Release Scope

### Tier 1 — Must Ship (Bugs)

| Item | Description | Status | Notes |
|------|-------------|--------|-------|
| BUG-008 | MoonReader shows "Annotations" instead of title | **Done** | Fixed with regression contract test (`tests/bug008.source-naming.test.ts`) |
| BUG-005 | Source path stale after file move | **Ready** | Needs test audit first |
| BUG-002 | Modal title doesn't update on navigation | **Ready** | Needs manual verification |
| BUG-012 | Card creation shows color filter not category | **Ready** | Depends on STORY-019 (done) |

### Tier 2 — Should Ship (Persistence)

| Item | Description | Status | Notes |
|------|-------------|--------|-------|
| DEBT-007 | FlashcardNote persistence consolidation | **Ready** | Touches model files — do after bugs |

### Tier 3 — Ship if Ready

| Item | Status | Notes |
|------|--------|-------|
| DEBT-027 (formalize scattered ADRs) | Ready | 8 ADRs from session logs |
| DEBT-015 remainder (esbuild/nanoid majors) | Backlog | Semver-major, deferred to 2026-03-15 |

### Explicitly Out of Scope

- STORY-012 (drift detection UX) — Backlog, needs design decisions
- DEBT-006 (disk boundary extraction) — catalogue only
- DEBT-013 (source polymorphism) — architectural, deferred
- DEBT-001 (discriminated unions) — backlog
- All SPIKEs (process/tooling research)

## Agent Delegation Strategy

| Agent | Items | Rationale |
|-------|-------|-----------|
| **Codex 5.3** | BUG-008, BUG-007, STORY-016 | Well-scoped, plans have exact code diffs + test matrices |
| **Gemini CLI** | DEBT-027 | Large-context structured extraction from session logs |
| **Claude Code** | BUG-005, DEBT-007 | Complex reasoning: event handling, architecture-sensitive refactor |
| **Manual** | BUG-002 | Verify in Obsidian, then close or plan fix |

## Execution Order

### Phase A — Parallel (3 agents)
- **Codex 5.3**: BUG-008 → BUG-007 → STORY-016 (sequential within agent)
- **Gemini CLI**: DEBT-027
- **Claude Code**: BUG-005 (snapshot-first, then 2-phase fix)

### Phase B — Sequential (after Phase A)
- **Manual**: BUG-002 verification in Obsidian test vault
- **Claude Code**: DEBT-007 persistence refactor (touches same model files as bugs, do after they're stable)

### Phase C — Release
1. Merge all fix branches to main
2. Merge polish branch to main
3. `npm test` + `npm run build` gate
4. `npm run release:prepare -- 0.6.0`
5. PR to main with `release:minor` label
6. Automation creates tag + release

## Release Gate Criteria

- [x] BUG-007 — section list heading hierarchy ✓
- [x] STORY-019 — filter buttons removed from card creation ✓
- [x] BUG-008 — MoonReader name fix
- [ ] BUG-005 — source path stale after move
- [ ] BUG-002 — modal title updates during navigation
- [ ] BUG-012 — card creation category filter
- [ ] DEBT-007 — FlashcardNote persistence
- [ ] `npm test` — all suites pass
- [ ] `npm run build` — clean
- [ ] Manual smoke test in Obsidian vault
- [ ] `npm run release:prepare -- 0.6.0` dry run

## Quick Status Check
Run `./scripts/project-status.sh --release` for current state.

## Current Remaining Scope (2026-02-20)
- Tier 1 bugs left: `BUG-005`, `BUG-002`, `BUG-012`
- Tier 2 left: `DEBT-007`
- Remaining scoped items to ship: `4`
